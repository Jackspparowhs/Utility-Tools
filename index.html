<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Utility Tools â€” PirateRuler</title>
<style>
  :root{
    --bg:#eef6fb;
    --card:#ffffff;
    --muted:#718096;
    --accent1:#5fb2ff;
    --accent2:#7a4bff;
    --shadow: 0 10px 30px rgba(10,26,46,0.08);
    --radius:18px;
    --glass: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.7));
  }
  [data-theme="dark"]{
    --bg:#08111a;
    --card:#07101a;
    --muted:#93a4b5;
    --accent1:#6ad1ff;
    --accent2:#7a9bff;
    --shadow: 0 10px 30px rgba(5,9,14,0.8);
    --glass: linear-gradient(180deg, rgba(12,23,34,0.95), rgba(8,14,21,0.9));
  }

  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text,#071633); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
  .wrap{max-width:760px;margin:28px auto;padding:20px;}

  /* header (neumorphism card) */
  .header{
    display:flex;align-items:center;justify-content:space-between;
    gap:16px;padding:18px;border-radius:18px;background:var(--glass);box-shadow:var(--shadow);
    backdrop-filter: blur(6px);
  }
  .brand{display:flex;gap:14px;align-items:center;}
  .logo{
    width:60px;height:60px;border-radius:14px;background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(30,60,120,0.12);
  }
  .title{line-height:1;}
  .title h1{margin:0;font-size:22px;font-weight:800;color:var(--text,#071633);}
  .title p{margin:0;color:var(--muted);font-size:14px;letter-spacing:0.1px;}

  /* controls on right */
  .controls{display:flex;gap:12px;align-items:center;}
  .theme-toggle{
    padding:10px 18px;border-radius:16px;background:var(--card);box-shadow:inset 0 -2px 0 rgba(0,0,0,0.03);
    display:flex;align-items:center;gap:10px;border:1px solid rgba(0,0,0,0.03);cursor:pointer;
  }
  .theme-dot{
    width:20px;height:20px;border-radius:999px;background:linear-gradient(135deg,var(--accent1),var(--accent2));box-shadow:0 6px 18px rgba(90,120,200,0.2);
  }
  .menu-btn{width:52px;height:44px;border-radius:12px;background:var(--card);display:grid;place-items:center;border:1px solid rgba(0,0,0,0.03);cursor:pointer}

  /* hero card */
  .hero{margin-top:20px;padding:34px;border-radius:20px;background:var(--card);box-shadow:var(--shadow);}
  .hero h2{margin:0;text-align:center;font-size:34px;line-height:1.02;font-weight:900;color:var(--text,#071633);}
  .hero p{max-width:640px;margin:14px auto 20px;color:var(--muted);text-align:center;}

  /* tool buttons */
  .tool-grid{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:6px}
  .tool-btn{padding:10px 18px;border-radius:999px;background:transparent;border:1px solid rgba(0,0,0,0.06);cursor:pointer;color:var(--text,#071633);font-weight:600;min-width:92px;text-align:center}
  .tool-btn.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;box-shadow:0 10px 30px rgba(90,120,200,0.12);}

  /* sections */
  .section{margin-top:22px;padding:22px;border-radius:14px;background:var(--card);box-shadow:var(--shadow)}
  .section h3{margin:0 0 8px 0;font-size:20px;color:var(--text,#071633)}
  .muted{color:var(--muted);}

  /* input and buttons */
  .input, textarea, select{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,0.06);background:rgba(255,255,255,0.9);font-size:15px;color:var(--text);}
  [data-theme="dark"] .input{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
  .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  .btn{padding:12px 20px;border-radius:12px;background:var(--card);border:1px solid rgba(0,0,0,0.06);cursor:pointer}
  .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;box-shadow:0 10px 30px rgba(90,120,200,0.14);border:none}

  /* footer */
  .footer{margin-top:26px;padding:20px;border-radius:14px;background:var(--card);box-shadow:var(--shadow);text-align:center}
  .cta{display:inline-block;padding:12px 28px;border-radius:28px;background:linear-gradient(90deg,#ff66a8,#7a4bff);color:white;font-weight:700;box-shadow:0 12px 36px rgba(120,70,200,0.18);text-decoration:none}

  /* sidebar modal */
  .sidebar{position:fixed;right:16px;top:90px;z-index:60;max-width:360px;width:84%;background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:16px;display:none}
  .sidebar.open{display:block}
  .sidebar a{display:block;padding:12px;border-radius:10px;background:transparent;color:var(--text);text-decoration:none;margin-bottom:10px;border:1px solid rgba(0,0,0,0.03)}
  @media(min-width:860px){ .wrap{max-width:920px;} .sidebar{right:40px;top:40px;width:360px;} }

  /* utilities boxes (rows like calculator site) */
  .feature-row{display:flex;flex-direction:column;gap:12px}
  .feature{display:flex;gap:14px;align-items:center;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));box-shadow:inset 0 -2px 0 rgba(0,0,0,0.02)}
  [data-theme="dark"] .feature{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));}
  .feature .ico{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#ff8fa6,#7a4bff);display:grid;place-items:center;color:white;font-weight:700}

  /* small responsive adjustments */
  @media(max-width:420px){
    .title h1{font-size:18px} .title p{font-size:13px}
    .logo{width:52px;height:52px} .header{padding:14px}
    .hero h2{font-size:26px}
  }
</style>
</head>
<body data-theme="light">
<div class="wrap">

  <!-- header -->
  <div class="header" role="banner">
    <div class="brand">
      <div class="logo">PR</div>
      <div class="title">
        <h1 id="site-title">Utility Tools</h1>
        <!-- Ensure "by PirateRuler.com" sits on the same line after "by" -->
        <p id="byline">by <span style="font-weight:700;color:var(--muted);">PirateRuler.com</span></p>
      </div>
    </div>

    <div class="controls">
      <div class="theme-toggle" id="themeToggle" role="button" aria-pressed="false" title="Toggle theme">
        <div class="theme-dot" id="themeDot"></div>
        <div id="themeLabel" style="color:var(--muted)">Light</div>
      </div>
      <div class="menu-btn" id="openSidebar" aria-label="Open menu">
        <svg width="20" height="14" viewBox="0 0 20 14" fill="none"><rect width="20" height="2" rx="1" fill="#4A5568"/><rect y="6" width="20" height="2" rx="1" fill="#4A5568"/><rect y="12" width="20" height="2" rx="1" fill="#4A5568"/></svg>
      </div>
    </div>
  </div>

  <!-- hero -->
  <div class="hero">
    <h2>All-in-one Utility Tools</h2>
    <p class="muted">Everyday quick tools people love â€” zero APIs, instant execution. Notes, stopwatch, date difference, world clock, password generator, converters and text helpers â€” private and lightweight.</p>

    <div class="tool-grid" id="toolGrid">
      <button class="tool-btn active" data-tool="notes">Notes</button>
      <button class="tool-btn" data-tool="stopwatch">Stopwatch</button>
      <button class="tool-btn" data-tool="datediff">Date Diff</button>
      <button class="tool-btn" data-tool="worldclock">World Clock</button>
      <button class="tool-btn" data-tool="password">Password</button>
      <button class="tool-btn" data-tool="clipboard">Clipboard</button>
      <button class="tool-btn" data-tool="filesize">File Size</button>
      <button class="tool-btn" data-tool="charword">Char/Word</button>
      <button class="tool-btn" data-tool="caseconv">Case Conv</button>
      <button class="tool-btn" data-tool="textformat">Text Format</button>
    </div>
  </div>

  <!-- sections (one container, we show/hide panels) -->
  <div id="panels">
    <!-- Notes (placeholder) -->
    <section class="section" data-panel="notes">
      <h3>Notes</h3>
      <p class="muted">Simple auto-saving note â€” saved to localStorage in your browser only.</p>
      <textarea id="notesArea" rows="6" class="input" placeholder="Write notes..."></textarea>
      <div class="row">
        <button class="btn" id="clearNotes">Clear</button>
        <button class="btn primary" id="saveNotes">Save</button>
      </div>
    </section>

    <!-- Stopwatch -->
    <section class="section" data-panel="stopwatch" style="display:none">
      <h3>Stopwatch</h3>
      <p class="muted">Start, pause or reset the stopwatch. Time runs locally.</p>
      <div style="font-size:28px;font-weight:800;margin:12px 0" id="swDisplay">00:00.00</div>
      <div class="row">
        <button class="btn primary" id="swStart">Start</button>
        <button class="btn" id="swStop">Stop</button>
        <button class="btn" id="swReset">Reset</button>
      </div>
    </section>

    <!-- Date Difference -->
    <section class="section" data-panel="datediff" style="display:none">
      <h3>Date difference finder</h3>
      <p class="muted">Calculate days between two dates.</p>
      <div class="row">
        <input class="input" type="date" id="dateA"><input class="input" type="date" id="dateB">
      </div>
      <div class="row">
        <button class="btn primary" id="calcDiff">Calculate</button>
        <div id="diffResult" style="align-self:center;margin-left:8px;color:var(--muted)"></div>
      </div>
    </section>

    <!-- World Clock -->
    <section class="section" data-panel="worldclock" style="display:none">
      <h3>World clock</h3>
      <p class="muted">Add multiple timezones â€” times update every second.</p>
      <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;">
        <select id="tzSelect" class="input" style="max-width:280px;">
          <!-- simpler curated list -->
          <option value="UTC">UTC</option>
          <option value="Europe/London">London</option>
          <option value="Europe/Paris">Paris</option>
          <option value="Europe/Oslo">Oslo</option>
          <option value="Asia/Kolkata">Kolkata</option>
          <option value="Asia/Tokyo">Tokyo</option>
          <option value="Australia/Sydney">Sydney</option>
          <option value="America/New_York">New York</option>
          <option value="America/Los_Angeles">Los Angeles</option>
        </select>
        <button class="btn primary" id="addTz">Add</button>
      </div>
      <div id="tzList" style="margin-top:14px;display:flex;flex-direction:column;gap:10px"></div>
    </section>

    <!-- Password generator -->
    <section class="section" data-panel="password" style="display:none">
      <h3>Password generator</h3>
      <p class="muted">Generate secure passwords locally.</p>
      <div class="row">
        <input type="number" id="pwLen" class="input" style="max-width:120px" value="16" min="6" max="64">
        <button class="btn primary" id="genPw">Generate</button>
      </div>
      <div style="margin-top:12px;display:flex;gap:10px;align-items:center">
        <input id="pwOut" class="input" readonly placeholder="Generated password appears here">
        <button class="btn" id="copyPw">Copy</button>
      </div>
    </section>

    <!-- Clipboard (placeholder) -->
    <section class="section" data-panel="clipboard" style="display:none">
      <h3>Clipboard / Text Saver</h3>
      <p class="muted">Quickly copy and paste text. (Uses the browser clipboard.)</p>
      <textarea id="clipText" rows="4" class="input" placeholder="Paste or type text"></textarea>
      <div class="row">
        <button class="btn primary" id="clipCopy">Copy to clipboard</button>
        <button class="btn" id="clipPaste">Paste from clipboard</button>
      </div>
    </section>

    <!-- File size (placeholder) -->
    <section class="section" data-panel="filesize" style="display:none">
      <h3>File size converter</h3>
      <p class="muted">Convert KB â†” MB â†” GB (placeholder UI).</p>
      <div class="row">
        <input class="input" id="fsVal" placeholder="Enter bytes / KB / MB">
        <button class="btn primary" id="fsConv">Convert</button>
      </div>
      <div id="fsOut" style="margin-top:10px;color:var(--muted)"></div>
    </section>

    <!-- Char/Word counter -->
    <section class="section" data-panel="charword" style="display:none">
      <h3>Character & Word counter</h3>
      <p class="muted">Paste text and get counts instantly.</p>
      <textarea id="cwText" rows="6" class="input" placeholder="Paste text here..."></textarea>
      <div class="row">
        <button class="btn primary" id="countBtn">Count</button>
        <button class="btn" id="clearCW">Clear</button>
        <div id="cwResult" style="margin-left:8px;align-self:center;color:var(--muted)"></div>
      </div>
    </section>

    <!-- Case conversion -->
    <section class="section" data-panel="caseconv" style="display:none">
      <h3>Case converter</h3>
      <p class="muted">Upper, lower, title case.</p>
      <textarea id="caseText" rows="4" class="input" placeholder="Paste text"></textarea>
      <div class="row">
        <button class="btn primary" id="toUpper">UPPER</button>
        <button class="btn" id="toLower">lower</button>
        <button class="btn" id="toTitle">Title Case</button>
      </div>
    </section>

    <!-- Text formatter (JSON pretty/minify) -->
    <section class="section" data-panel="textformat" style="display:none">
      <h3>Text Formatter / Indenter</h3>
      <p class="muted">JSON pretty-print, JSON minify, basic HTML tidy.</p>
      <textarea id="formatText" rows="8" class="input" placeholder='{ "hello": "world" }'></textarea>
      <div class="row">
        <button class="btn primary" id="jsonPretty">JSON pretty</button>
        <button class="btn" id="jsonMin">JSON minify</button>
        <button class="btn" id="copyFormat">Copy</button>
        <button class="btn" id="clearFormat">Clear</button>
      </div>
    </section>
  </div>

  <!-- feature boxes like calculator site -->
  <div class="section feature-row">
    <div class="feature">
      <div class="ico">âš¡</div>
      <div>
        <div style="font-weight:800">Lightning fast</div>
        <div class="muted">Optimized code, minimal dependencies â€” instant on mobile & desktop.</div>
      </div>
    </div>

    <div class="feature">
      <div class="ico" style="background:linear-gradient(135deg,#4ee78a,#7a4bff)">ðŸ”’</div>
      <div>
        <div style="font-weight:800">Private by design</div>
        <div class="muted">No personal data is stored â€” everything runs in your browser by default.</div>
      </div>
    </div>

    <div class="feature">
      <div class="ico" style="background:linear-gradient(135deg,#ff9066,#ff6ec7)">ðŸ§°</div>
      <div>
        <div style="font-weight:800">All tools in one</div>
        <div class="muted">Notes, stopwatch, converters, text tools â€” ready to use.</div>
      </div>
    </div>
  </div>

  <!-- footer -->
  <div class="footer">
    <a class="cta" href="https://pirateruler.com" target="_blank" rel="noopener">Visit PirateRuler.com</a>
    <p class="muted" style="margin-top:12px">Utility Tools by PirateRuler.com â€” lightweight, private web utilities you can run anywhere. No signups, no tracking.</p>
  </div>

</div>

<!-- sidebar content (hidden panel) -->
<div id="sidebar" class="sidebar" role="dialog" aria-hidden="true">
  <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
    <div class="logo" style="width:48px;height:48px;font-size:18px">PR</div>
    <div>
      <div style="font-weight:800">Utility Tools</div>
      <div class="muted" style="font-size:13px">by PirateRuler.com â€” Private Â· Fast</div>
    </div>
  </div>

  <div style="margin-top:6px;font-weight:700">PirateRuler Links</div>
  <div class="muted" style="font-size:13px;margin-bottom:10px">Quick links & backup resources</div>

  <a href="https://pirateruler.com" target="_blank" rel="noopener">Open PirateRuler.com</a>
  <a href="#">About â€” PirateRuler</a>
  <a href="#">Privacy Policy</a>
  <a href="#">Contact</a>
  <a href="#">Terms & Service</a>

  <div style="margin-top:12px;color:var(--muted)">If this site is offline you can visit PirateRuler for backups & resources: pirateruler.com</div>
  <div style="display:flex;justify-content:flex-end;margin-top:12px">
    <button class="btn" id="closeSidebar">Close</button>
  </div>
</div>

<script>
  // theme
  const body = document.body;
  const themeToggle = document.getElementById('themeToggle');
  const themeLabel = document.getElementById('themeLabel');
  const themeDot = document.getElementById('themeDot');
  const saved = localStorage.getItem('pr-theme') || 'light';
  body.setAttribute('data-theme', saved);
  themeLabel.textContent = saved === 'dark' ? 'Dark' : 'Light';

  function toggleTheme(){
    const cur = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    body.setAttribute('data-theme', cur);
    localStorage.setItem('pr-theme', cur);
    themeLabel.textContent = cur === 'dark' ? 'Dark' : 'Light';
  }
  themeToggle.addEventListener('click', toggleTheme);

  // sidebar open/close
  const openSidebar = document.getElementById('openSidebar');
  const sidebar = document.getElementById('sidebar');
  const closeSidebar = document.getElementById('closeSidebar');
  openSidebar.addEventListener('click', ()=>{ sidebar.classList.add('open'); sidebar.setAttribute('aria-hidden','false'); });
  closeSidebar.addEventListener('click', ()=>{ sidebar.classList.remove('open'); sidebar.setAttribute('aria-hidden','true'); });

  // tool switching
  const toolBtns = document.querySelectorAll('.tool-btn');
  const panels = document.querySelectorAll('[data-panel]');
  toolBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      toolBtns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const which = btn.getAttribute('data-tool');
      panels.forEach(p=>{
        p.style.display = p.getAttribute('data-panel') === which ? '' : 'none';
      });
      // scroll to the top of the panels
      document.getElementById('panels').scrollIntoView({behavior:'smooth', block:'start'});
    });
  });

  // Notes save
  const notesArea = document.getElementById('notesArea');
  notesArea.value = localStorage.getItem('pr-notes') || '';
  document.getElementById('saveNotes').addEventListener('click', ()=> {
    localStorage.setItem('pr-notes', notesArea.value);
    alert('Notes saved locally.');
  });
  document.getElementById('clearNotes').addEventListener('click', ()=> { notesArea.value=''; localStorage.removeItem('pr-notes'); });

  // Stopwatch
  let swRunning=false, swStart=0, swElapsed=0, swTimer;
  const swDisplay = document.getElementById('swDisplay');
  document.getElementById('swStart').addEventListener('click', ()=>{
    if(!swRunning){ swRunning=true; swStart=Date.now()-swElapsed; swTimer=setInterval(updateSW,30); }
  });
  document.getElementById('swStop').addEventListener('click', ()=>{ swRunning=false; clearInterval(swTimer); swElapsed=Date.now()-swStart; updateSW(); });
  document.getElementById('swReset').addEventListener('click', ()=>{ swRunning=false; clearInterval(swTimer); swElapsed=0; swStart=0; swDisplay.textContent='00:00.00'; });

  function updateSW(){
    const t = Date.now() - swStart;
    const ms = Math.floor(t % 1000 / 10);
    const s = Math.floor((t/1000) % 60);
    const m = Math.floor(t/60000);
    swDisplay.textContent = String(m).padStart(2,'0')+':'+String(s).padStart(2,'0')+'.'+String(ms).padStart(2,'0');
  }

  // Date diff
  document.getElementById('calcDiff').addEventListener('click', ()=>{
    const a=document.getElementById('dateA').value, b=document.getElementById('dateB').value;
    if(!a||!b){ document.getElementById('diffResult').textContent='Select two dates'; return; }
    const da=new Date(a), db=new Date(b);
    const diff = Math.abs(db - da);
    const days = Math.floor(diff / (1000*60*60*24));
    document.getElementById('diffResult').textContent = days + ' day(s)';
  });

  // World clock: add timezone boxes
  const tzList = document.getElementById('tzList');
  const tzSelect = document.getElementById('tzSelect');
  const zones = [];

  document.getElementById('addTz').addEventListener('click', ()=>{
    const tz = tzSelect.value;
    if(zones.includes(tz)) return;
    zones.push(tz);
    const el = document.createElement('div');
    el.style.display='flex';el.style.justifyContent='space-between';el.style.alignItems='center';
    el.style.padding='10px';el.style.borderRadius='10px';el.style.background='rgba(0,0,0,0.03)';
    el.innerHTML = `<div style="font-weight:700">${tz.replace('_',' ')}</div><div id="time-${tz}">--:--:--</div>`;
    tzList.appendChild(el);
    updateClocks();
  });

  function updateClocks(){
    zones.forEach(tz=>{
      try{
        const timeStr = new Intl.DateTimeFormat('en-GB',{timeZone:tz,hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false}).format(new Date());
        const node = document.getElementById('time-'+tz);
        if(node) node.textContent = timeStr;
      }catch(e){}
    });
  }
  setInterval(updateClocks,1000);

  // Password generator
  function genPassword(len){
    const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]:;?><,./-=';
    let out='';
    for(let i=0;i<len;i++) out += charset.charAt(Math.floor(Math.random()*charset.length));
    return out;
  }
  document.getElementById('genPw').addEventListener('click', ()=>{
    const len = Math.max(6, Math.min(64, parseInt(document.getElementById('pwLen').value || 16)));
    const p = genPassword(len);
    document.getElementById('pwOut').value = p;
  });
  document.getElementById('copyPw').addEventListener('click', async ()=>{
    const v = document.getElementById('pwOut').value;
    if(!v) return alert('Generate first');
    await navigator.clipboard.writeText(v);
    alert('Copied to clipboard');
  });

  // Clipboard actions
  document.getElementById('clipCopy').addEventListener('click', async ()=>{
    await navigator.clipboard.writeText(document.getElementById('clipText').value || '');
    alert('Copied');
  });
  document.getElementById('clipPaste').addEventListener('click', async ()=>{
    try{
      const t = await navigator.clipboard.readText();
      document.getElementById('clipText').value = t;
    }catch(e){ alert('Clipboard not available'); }
  });

  // File size convert (basic parse)
  document.getElementById('fsConv').addEventListener('click', ()=>{
    const v = document.getElementById('fsVal').value.trim();
    if(!v){ document.getElementById('fsOut').textContent='Enter value like 1KB or 1024'; return; }
    let out='';
    try{
      if(/[a-zA-Z]/.test(v)){
        // parse like 2MB, 512KB
        const m = v.match(/^([\d.]+)\s*(b|kb|mb|gb)?$/i);
        if(!m){ document.getElementById('fsOut').textContent='Invalid'; return; }
        let val=parseFloat(m[1]), unit=(m[2]||'b').toLowerCase();
        if(unit==='b'){ out = (val/1024).toFixed(2) + ' KB'; }
        else if(unit==='kb'){ out = (val/1024).toFixed(2) + ' MB'; }
        else if(unit==='mb'){ out = (val/1024).toFixed(2) + ' GB'; }
        else out='OK';
      }else{
        const bytes = parseFloat(v);
        out = `${(bytes/1024).toFixed(2)} KB â€” ${(bytes/1024/1024).toFixed(2)} MB`;
      }
    }catch(e){ out='â€”'; }
    document.getElementById('fsOut').textContent = out;
  });

  // Char/Word counter
  document.getElementById('countBtn').addEventListener('click', ()=>{
    const t = document.getElementById('cwText').value || '';
    const chars = t.length;
    const words = t.trim() ? t.trim().split(/\s+/).length : 0;
    document.getElementById('cwResult').textContent = `${chars} char â€¢ ${words} word(s)`;
  });
  document.getElementById('clearCW').addEventListener('click', ()=>{ document.getElementById('cwText').value=''; document.getElementById('cwResult').textContent=''; });

  // Case conv
  document.getElementById('toUpper').addEventListener('click', ()=>{ const el=document.getElementById('caseText'); el.value = el.value.toUpperCase(); });
  document.getElementById('toLower').addEventListener('click', ()=>{ const el=document.getElementById('caseText'); el.value = el.value.toLowerCase(); });
  document.getElementById('toTitle').addEventListener('click', ()=>{ const el=document.getElementById('caseText'); el.value = el.value.toLowerCase().replace(/\b\w/g,c=>c.toUpperCase()); });

  // Text formatter: JSON pretty/minify + copy/clear
  document.getElementById('jsonPretty').addEventListener('click', ()=>{
    const v = document.getElementById('formatText').value;
    try{
      const obj = JSON.parse(v);
      document.getElementById('formatText').value = JSON.stringify(obj, null, 2);
    }catch(e){
      alert('Invalid JSON');
    }
  });
  document.getElementById('jsonMin').addEventListener('click', ()=>{
    const v = document.getElementById('formatText').value;
    try{
      const obj = JSON.parse(v);
      document.getElementById('formatText').value = JSON.stringify(obj);
    }catch(e){
      alert('Invalid JSON');
    }
  });
  document.getElementById('copyFormat').addEventListener('click', async ()=>{
    await navigator.clipboard.writeText(document.getElementById('formatText').value || '');
    alert('Copied');
  });
  document.getElementById('clearFormat').addEventListener('click', ()=>{ document.getElementById('formatText').value=''; });

  // init: ensure "Utility Tools by PirateRuler.com" fits on two lines
  (function tidyByline(){
    // the byline is already "by PirateRuler.com" on one line in markup.
    // If browser wraps, we keep it short; design ensures it stays two lines with header size.
  })();

  // ensure proper tool visibility on load: show notes panel
  document.querySelector('[data-panel="notes"]').style.display='';

  // small resize handler to ensure toolbar buttons don't overflow (they wrap naturally).
  window.addEventListener('resize', ()=>{/* styling handled by CSS */});
</script>
</body>
</html>
