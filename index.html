<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Utility Tools — PirateRuler</title>
<link rel="icon" href="data:,">
<style>
  :root{
    --bg: #f4f7fb;
    --card: #ffffff;
    --muted: #6b7785;
    --accent1: linear-gradient(90deg,#5fb0ff 0%, #7b6bff 100%);
    --glow: rgba(91,130,255,0.25);
    --text: #0e2433;
    --radius: 18px;
    --soft-shadow: 0 8px 18px rgba(16,24,40,0.06);
    --soft-shadow-2: 0 20px 40px rgba(16,24,40,0.06);
  }

  .dark{
    --bg: #081223;
    --card: #071022;
    --muted: #9aa8b6;
    --text: #e6f0f7;
    --accent1: linear-gradient(90deg,#3397ff 0%, #8b6eff 100%);
    --glow: rgba(80,120,200,0.14);
    --soft-shadow: 0 8px 18px rgba(0,0,0,0.6);
    --soft-shadow-2: 0 20px 40px rgba(0,0,0,0.6);
  }

  html,body{height:100%;background:var(--bg);font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; color:var(--text); -webkit-font-smoothing:antialiased;}
  .wrap{max-width:820px;margin:24px auto;padding:16px;}

  /* header */
  .hdr{display:flex;align-items:center;gap:14px;background:var(--card);border-radius:14px;padding:14px 16px;box-shadow:var(--soft-shadow);}
  .logo{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;background:linear-gradient(135deg,#3aa2ff,#7b6bff);box-shadow: 0 8px 20px rgba(59,129,227,0.18);}
  .title{display:flex;flex-direction:column;line-height:1;}
  .title h1{font-size:20px;margin:0;padding:0;font-weight:700;}
  .title small{font-size:13px;color:var(--muted);margin-top:4px;}

  .hdr-controls{margin-left:auto;display:flex;gap:10px;align-items:center;}
  .theme-toggle{border-radius:999px;padding:8px 12px; background:var(--card);box-shadow:var(--soft-shadow);cursor:pointer; display:flex;align-items:center; gap:8px;}
  .theme-toggle .dot{width:18px;height:18px;border-radius:50%;background:var(--accent1);box-shadow:0 8px 28px var(--glow);}
  .menu-btn{width:44px;height:44px;border-radius:10px;background:var(--card);box-shadow:var(--soft-shadow);display:flex;align-items:center;justify-content:center;cursor:pointer;}

  /* hero card */
  .hero{background:var(--card);border-radius:22px;padding:26px;margin-top:18px;box-shadow:var(--soft-shadow-2);}
  .hero h2{font-size:30px;margin:4px 0 10px 0;text-align:center;}
  .hero p{color:var(--muted);text-align:center;line-height:1.6;margin:0 0 18px 0;}
  .tool-grid{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:6px;}
  .tool-btn{padding:10px 18px;border-radius:28px;background:transparent;border:1px solid rgba(0,0,0,0.06);min-width:96px;text-align:center;color:var(--text);cursor:pointer;box-shadow:var(--soft-shadow);}
  .tool-btn.active{background:var(--accent1);color:#fff;box-shadow:0 14px 40px var(--glow);transform:translateY(-2px);}

  /* cards */
  .card{background:var(--card);border-radius:16px;padding:18px;margin-top:18px;box-shadow:var(--soft-shadow-2);}
  .card h3{margin:0 0 10px 0;}
  .muted{color:var(--muted);font-size:15px;}

  /* calculator-like buttons and inputs */
  input[type="text"], textarea{width:100%;padding:14px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);box-shadow:var(--soft-shadow);background:transparent;color:var(--text);font-size:15px;}
  .btn-row{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;}
  .btn{padding:12px 18px;border-radius:12px;background:var(--card);border:1px solid rgba(0,0,0,0.06);cursor:pointer;box-shadow:var(--soft-shadow);}
  .btn.primary{background:var(--accent1);color:#fff;box-shadow:0 18px 40px var(--glow);}

  /* responsive sizing */
  @media (max-width:520px){
    .hero h2{font-size:24px;}
    .title h1{font-size:18px;}
    .logo{width:48px;height:48px;}
  }

  /* sidebar modal */
  .sidebar{position:fixed;right:0;top:0;height:100%;width:92%;max-width:360px;background:var(--card);box-shadow:-20px 0 60px rgba(0,0,0,0.06);transform:translateX(110%);transition:transform .28s cubic-bezier(.2,.9,.26,1);z-index:40;padding:18px;border-left:1px solid rgba(0,0,0,0.03);}
  .sidebar.open{transform:translateX(0);}
  .sidebar .close{display:block;margin-left:auto;border-radius:10px;padding:8px 12px;border:1px solid rgba(0,0,0,0.06);cursor:pointer;}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s;}
  .overlay.show{opacity:1;pointer-events:auto;}

  /* world clock list */
  .tz-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;justify-content:center;}
  .tz-chip{padding:6px 10px;border-radius:12px;background:transparent;border:1px solid rgba(0,0,0,0.06);cursor:pointer;}
  .tz-chip.active{background:var(--accent1);color:#fff;box-shadow:0 10px 30px var(--glow);}

  /* footer big CTA */
  .cta{margin-top:20px;padding:18px;border-radius:14px;text-align:center;background:var(--card);box-shadow:var(--soft-shadow);}
  .big-btn{display:inline-block;padding:12px 26px;border-radius:30px;background:linear-gradient(90deg,#ff6b9a,#7b6bff);color:white;text-decoration:none;font-weight:700;box-shadow:0 20px 60px rgba(123,107,255,0.18);}
</style>
</head>
<body>

<div class="wrap" id="wrap">
  <!-- Header -->
  <div class="hdr" role="banner">
    <div class="logo">PR</div>
    <div class="title">
      <h1 id="siteTitle">Utility Tools</h1>
      <small id="siteBy">by PirateRuler.com</small>
    </div>

    <div class="hdr-controls">
      <div class="theme-toggle" id="themeToggle" title="Toggle theme">
        <div class="dot" id="themeDot" aria-hidden="true"></div>
        <div style="font-size:13px;color:var(--muted);margin-left:6px" id="themeLabel">Light</div>
      </div>
      <div class="menu-btn" id="menuBtn" aria-label="Open menu">☰</div>
    </div>
  </div>

  <!-- Hero / Tools grid -->
  <div class="hero">
    <h2>All-in-one Utility Tools</h2>
    <p class="muted">Everyday quick tools people love — zero APIs, instant execution. Notes, stopwatch, date difference, world clock, password generator, converters and text helpers — private and lightweight.</p>

    <div class="tool-grid" id="toolGrid">
      <!-- will be built by JS -->
    </div>
  </div>

  <!-- Example tool cards -->
  <div class="card" id="toolArea">
    <!-- dynamic content -->
    <div class="muted">Pick a tool above to open it.</div>
  </div>

  <div class="card cta">
    <a href="https://pirateruler.com" class="big-btn" target="_blank" rel="noopener">Visit PirateRuler.com</a>
    <p style="color:var(--muted);margin-top:12px">Utility Tools by PirateRuler.com — lightweight, private web utilities you can run anywhere.</p>
  </div>
</div>

<!-- Sidebar -->
<div class="overlay" id="overlay"></div>
<aside class="sidebar" id="sidebar" role="dialog" aria-hidden="true">
  <div style="display:flex;align-items:center;gap:12px;">
    <div class="logo">PR</div>
    <div>
      <div style="font-weight:700;font-size:18px">Utility Tools</div>
      <div style="color:var(--muted);font-size:13px">by PirateRuler.com</div>
    </div>
    <div style="margin-left:auto">
      <button class="close" id="closeSidebar">Close</button>
    </div>
  </div>

  <div style="margin-top:18px">
    <h4 style="margin:0 0 8px 0;">PirateRuler Links</h4>
    <div class="muted">Quick links & backup resources</div>
    <div style="margin-top:12px;">
      <div style="margin-bottom:10px"><a href="https://pirateruler.com" target="_blank">Open PirateRuler.com</a></div>
      <div style="margin-bottom:6px">About — PirateRuler</div>
      <div style="margin-bottom:6px">Privacy Policy</div>
      <div style="margin-bottom:6px">Contact</div>
      <div style="margin-bottom:6px">Terms & Service</div>
    </div>
  </div>
</aside>

<script>
/* ---------- Config & tools list ---------- */
const tools = [
  {id:'notes', title:'Notes', desc:'Small note saver (local only).'},
  {id:'stopwatch', title:'Stopwatch', desc:'Start / stop / reset timer.'},
  {id:'datediff', title:'Date Diff', desc:'Days between two dates.'},
  {id:'worldclock', title:'World Clock', desc:'See multiple timezones at once.'},
  {id:'password', title:'Password', desc:'Secure random password generator.'},
  {id:'clipboard', title:'Clipboard', desc:'Quick copy/paste helpers.'},
  {id:'filesize', title:'File Size', desc:'KB/MB/GB converter.'},
  {id:'charcount', title:'Char/Word', desc:'Character & word counter.'},
  {id:'case', title:'Case Conv', desc:'Upper / lower / title case.'},
  {id:'textformat', title:'Text Format', desc:'JSON pretty / minify, HTML tidy.'},
];

/* ---------- UI build ---------- */
const grid = document.getElementById('toolGrid');
const toolArea = document.getElementById('toolArea');

tools.forEach(t=>{
  const b = document.createElement('button');
  b.className='tool-btn';
  b.textContent = t.title;
  b.dataset.id = t.id;
  b.title = t.desc;
  b.addEventListener('click', ()=> openTool(t.id));
  grid.appendChild(b);
});

/* ---------- Theme toggle (light default) ---------- */
const root = document.documentElement;
const wrap = document.getElementById('wrap');
const themeToggle = document.getElementById('themeToggle');
const themeLabel = document.getElementById('themeLabel');
const themeDot = document.getElementById('themeDot');

function setTheme(name){
  if(name === 'dark'){
    document.documentElement.classList.add('dark');
    themeLabel.textContent = 'Dark';
    localStorage.setItem('pr-theme','dark');
  } else {
    document.documentElement.classList.remove('dark');
    themeLabel.textContent = 'Light';
    localStorage.setItem('pr-theme','light');
  }
}
const saved = localStorage.getItem('pr-theme') || 'light';
setTheme(saved);

themeToggle.addEventListener('click', ()=>{
  const now = localStorage.getItem('pr-theme') === 'dark' ? 'light' : 'dark';
  setTheme(now);
});

/* ---------- Sidebar ---------------- */
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const closeSidebar = document.getElementById('closeSidebar');

function openSidebar(){ sidebar.classList.add('open'); overlay.classList.add('show'); sidebar.setAttribute('aria-hidden','false'); }
function closeS(){ sidebar.classList.remove('open'); overlay.classList.remove('show'); sidebar.setAttribute('aria-hidden','true'); }

menuBtn.addEventListener('click', openSidebar);
closeSidebar.addEventListener('click', closeS);
overlay.addEventListener('click', closeS);

/* ---------- Tool opening & rendering ---------- */
function clearActiveButtons(){
  document.querySelectorAll('.tool-btn').forEach(b=>b.classList.remove('active'));
}

function openTool(id){
  clearActiveButtons();
  const btn = document.querySelector(`.tool-btn[data-id="${id}"]`);
  if(btn) btn.classList.add('active');

  // render the tool area
  switch(id){
    case 'notes': renderNotes(); break;
    case 'stopwatch': renderStopwatch(); break;
    case 'datediff': renderDateDiff(); break;
    case 'worldclock': renderWorldClock(); break;
    case 'password': renderPassword(); break;
    case 'clipboard': renderClipboard(); break;
    case 'filesize': renderFileSize(); break;
    case 'charcount': renderCharCount(); break;
    case 'case': renderCaseConv(); break;
    case 'textformat': renderTextFormat(); break;
    default: toolArea.innerHTML = '<div class="muted">Tool not found.</div>';
  }

  // scroll to the card
  toolArea.scrollIntoView({behavior:'smooth',block:'center'});
}

/* ---------- Tools Implementation ---------- */

/* NOTES (localStorage) */
function renderNotes(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Notes</h3>
      <div class="muted">Quick notes stored locally in your browser.</div>
      <textarea id="notesText" rows="6" placeholder="Type notes..."></textarea>
      <div class="btn-row">
        <button class="btn primary" id="saveNotes">Save</button>
        <button class="btn" id="clearNotes">Clear</button>
      </div>
    </div>`;
  const ta = document.getElementById('notesText');
  const saved = localStorage.getItem('pr-notes') || '';
  ta.value = saved;
  document.getElementById('saveNotes').onclick = ()=> { localStorage.setItem('pr-notes', ta.value); toast('Saved'); };
  document.getElementById('clearNotes').onclick = ()=> { ta.value=''; localStorage.removeItem('pr-notes'); toast('Cleared'); };
}

/* STOPWATCH */
function renderStopwatch(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Stopwatch</h3>
      <div class="muted">Simple stopwatch with lap support.</div>
      <div style="font-size:26px;font-weight:700;margin-top:14px" id="swDisplay">00:00:00.0</div>
      <div style="margin-top:12px" id="laps"></div>
      <div class="btn-row" style="margin-top:14px">
        <button class="btn primary" id="swStart">Start</button>
        <button class="btn" id="swLap">Lap</button>
        <button class="btn" id="swReset">Reset</button>
      </div>
    </div>`;
  let running=false, start=0, elapsed=0, timer=null, laps=[];
  const display = document.getElementById('swDisplay'), lapsEl = document.getElementById('laps');
  function fmt(ms){
    const h=Math.floor(ms/3600000); ms%=3600000;
    const m=Math.floor(ms/60000); ms%=60000;
    const s=Math.floor(ms/1000); const d=Math.floor(ms/100);
    return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${d}`;
  }
  function tick(){ const now = Date.now(); display.textContent = fmt(elapsed + (running ? now-start : 0)); }
  document.getElementById('swStart').onclick = function(){
    if(!running){
      running=true; start=Date.now(); this.textContent='Stop';
      timer = setInterval(tick,100); toast('Started');
    } else {
      running=false; elapsed += Date.now()-start; clearInterval(timer); this.textContent='Start'; toast('Stopped');
    }
  };
  document.getElementById('swLap').onclick = function(){
    const time = elapsed + (running ? Date.now()-start : 0);
    laps.unshift(time);
    lapsEl.innerHTML = laps.map((l,i)=>`<div style="padding:8px 0;border-bottom:1px dashed rgba(0,0,0,0.04)">${i+1}. ${fmt(l)}</div>`).join('');
  };
  document.getElementById('swReset').onclick = function(){ running=false; clearInterval(timer); elapsed=0; laps=[]; display.textContent='00:00:00.0'; lapsEl.innerHTML=''; document.getElementById('swStart').textContent='Start'; toast('Reset'); };
  tick();
}

/* DATE DIFFERENCE */
function renderDateDiff(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Date Difference</h3>
      <div class="muted">Days between two dates.</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <input type="date" id="d1">
        <input type="date" id="d2">
      </div>
      <div class="btn-row">
        <button class="btn primary" id="calcDate">Calculate</button>
        <div id="dateResult" style="align-self:center;color:var(--muted);margin-left:6px"></div>
      </div>
    </div>`;
  document.getElementById('calcDate').onclick = ()=>{
    const d1 = document.getElementById('d1').value, d2=document.getElementById('d2').value;
    if(!d1||!d2){ toast('Select both dates'); return; }
    const diff = Math.abs(new Date(d2)-new Date(d1));
    const days = Math.floor(diff/86400000);
    document.getElementById('dateResult').textContent = `${days} day(s)`;
  };
}

/* WORLD CLOCK */
function renderWorldClock(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>World Clock</h3>
      <div class="muted">See times in multiple time zones (updates every second).</div>
      <div class="tz-row" id="tzRow"></div>
      <div style="margin-top:12px" id="tzList"></div>
    </div>`;
  const tzs = [
    {id:'local', label:'Local'},
    {id:'UTC', label:'UTC'},
    {id:'America/New_York', label:'New York'},
    {id:'Europe/London', label:'London'},
    {id:'Europe/Paris', label:'Paris'},
    {id:'Asia/Dubai', label:'Dubai'},
    {id:'Asia/Kolkata', label:'India'},
    {id:'Asia/Tokyo', label:'Tokyo'},
    {id:'Australia/Sydney', label:'Sydney'},
  ];
  const tzRow = document.getElementById('tzRow'), tzList = document.getElementById('tzList');
  tzRow.innerHTML = tzs.map(t=>`<button class="tz-chip" data-id="${t.id}">${t.label}</button>`).join('');
  function renderTimes(){
    tzList.innerHTML = tzs.map(t=>{
      const dt = t.id === 'local' ? new Date() : new Date(new Date().toLocaleString('en-US',{timeZone:t.id}));
      const hh = dt.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit',second:'2-digit'});
      return `<div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(0,0,0,0.03)"><div><strong>${t.label}</strong><div class="muted" style="font-size:13px">${t.id}</div></div><div style="font-weight:700">${hh}</div></div>`;
    }).join('');
  }
  renderTimes();
  const interval = setInterval(renderTimes,1000);
  // mark active tz on click
  tzRow.querySelectorAll('.tz-chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{ tzRow.querySelectorAll('.tz-chip').forEach(c=>c.classList.remove('active')); ch.classList.add('active'); });
  });
}

/* PASSWORD GENERATOR */
function renderPassword(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Password generator</h3>
      <div class="muted">Strong random passwords — copy to clipboard.</div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <input type="number" id="pwLen" value="16" min="6" max="64" style="width:110px">
        <button class="btn primary" id="genPw">Generate</button>
        <button class="btn" id="copyPw">Copy</button>
      </div>
      <input type="text" id="pwOut" placeholder="Generated password appears here" style="margin-top:12px">
    </div>`;
  const out = document.getElementById('pwOut');
  document.getElementById('genPw').onclick = ()=>{
    const len = parseInt(document.getElementById('pwLen').value)||16;
    out.value = gen(len);
  };
  document.getElementById('copyPw').onclick = ()=>{
    if(!out.value){ toast('Generate first'); return;}
    navigator.clipboard.writeText(out.value).then(()=>toast('Copied'));
  };
  function gen(n){
    const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
    let s=''; for(let i=0;i<n;i++) s+=chars[Math.floor(Math.random()*chars.length)];
    return s;
  }
}

/* CLIPBOARD quick */
function renderClipboard(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Clipboard</h3>
      <div class="muted">Paste & copy quickly.</div>
      <textarea id="clipIn" rows="5" placeholder="Paste here..."></textarea>
      <div class="btn-row">
        <button class="btn primary" id="clipCopy">Copy</button>
        <button class="btn" id="clipPaste">Paste</button>
        <button class="btn" id="clipClear">Clear</button>
      </div>
    </div>`;
  const inEl = document.getElementById('clipIn');
  document.getElementById('clipCopy').onclick = ()=>{ navigator.clipboard.writeText(inEl.value).then(()=>toast('Copied')); };
  document.getElementById('clipPaste').onclick = ()=>{ navigator.clipboard.readText().then(t=>inEl.value=t).catch(()=>toast('Paste not allowed')); };
  document.getElementById('clipClear').onclick = ()=>{ inEl.value=''; toast('Cleared'); };
}

/* FILE SIZE converter */
function renderFileSize(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>File Size Converter</h3>
      <div class="muted">Convert between bytes, KB, MB, GB.</div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <input type="number" id="fsVal" placeholder="value" style="width:120px">
        <select id="fsFrom">
          <option value="1">B</option>
          <option value="1024">KB</option>
          <option value="1048576">MB</option>
          <option value="1073741824">GB</option>
        </select>
        <select id="fsTo">
          <option value="1">B</option>
          <option value="1024">KB</option>
          <option value="1048576" selected>MB</option>
          <option value="1073741824">GB</option>
        </select>
      </div>
      <div class="btn-row">
        <button class="btn primary" id="fsCalc">Convert</button>
        <div id="fsRes" style="align-self:center;color:var(--muted);margin-left:6px"></div>
      </div>
    </div>`;
  document.getElementById('fsCalc').onclick = ()=>{
    const v = Number(document.getElementById('fsVal').value) || 0;
    const from = Number(document.getElementById('fsFrom').value);
    const to = Number(document.getElementById('fsTo').value);
    const res = (v*from)/to;
    document.getElementById('fsRes').textContent = res % 1 === 0 ? res : res.toFixed(4);
  };
}

/* CHAR & WORD COUNTER */
function renderCharCount(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Character & Word counter</h3>
      <div class="muted">Paste text to count characters and words.</div>
      <textarea id="cwText" rows="6" placeholder="Paste text here..."></textarea>
      <div class="btn-row">
        <button class="btn primary" id="cwCount">Count</button>
        <button class="btn" id="cwClear">Clear</button>
        <div id="cwRes" style="align-self:center;color:var(--muted);margin-left:6px"></div>
      </div>
    </div>`;
  document.getElementById('cwCount').onclick = ()=>{
    const s = document.getElementById('cwText').value.trim();
    const chars = s.length;
    const words = s ? s.split(/\s+/).length : 0;
    document.getElementById('cwRes').textContent = `${words} words • ${chars} chars`;
  };
  document.getElementById('cwClear').onclick = ()=>{ document.getElementById('cwText').value=''; document.getElementById('cwRes').textContent=''; };
}

/* CASE CONVERTER */
function renderCaseConv(){
  toolArea.innerHTML = `
    <div class="card">
      <h3>Case Converter</h3>
      <div class="muted">Uppercase, lowercase, title case.</div>
      <textarea id="caseText" rows="5" placeholder="Paste text here..."></textarea>
      <div class="btn-row">
        <button class="btn primary" id="toUpper">UPPER</button>
        <button class="btn" id="toLower">lower</button>
        <button class="btn" id="toTitle">Title Case</button>
        <button class="btn" id="caseCopy">Copy</button>
      </div>
    </div>`;
  const t = document.getElementById('caseText');
  document.getElementById('toUpper').onclick = ()=> t.value = t.value.toUpperCase();
  document.getElementById('toLower').onclick = ()=> t.value = t.value.toLowerCase();
  document.getElementById('toTitle').onclick = ()=> t.value = t.value.replace(/\w\S*/g, w => w.charAt(0).toUpperCase()+w.substr(1).toLowerCase());
  document.getElementById('caseCopy').onclick = ()=> { navigator.clipboard.writeText(t.value).then(()=>toast('Copied')); };
}

/* TEXT FORMAT (JSON pretty/minify) */
function renderTextFormat(){
  toolArea.innerHTML = `
  <div class="card">
    <h3>Text Formatter / Indenter</h3>
    <div class="muted">JSON pretty-print, JSON minify, basic HTML tidy.</div>
    <textarea id="tfText" rows="8" placeholder='{ "hello": "world" }'></textarea>
    <div class="btn-row">
      <button class="btn primary" id="jsonPretty">JSON pretty</button>
      <button class="btn" id="jsonMin">JSON minify</button>
      <button class="btn" id="tfCopy">Copy</button>
      <button class="btn" id="tfClear">Clear</button>
    </div>
  </div>`;
  const ta = document.getElementById('tfText');
  document.getElementById('jsonPretty').onclick = ()=> {
    try { ta.value = JSON.stringify(JSON.parse(ta.value), null, 2); } catch(e){ toast('Invalid JSON'); }
  };
  document.getElementById('jsonMin').onclick = ()=> {
    try { ta.value = JSON.stringify(JSON.parse(ta.value)); } catch(e){ toast('Invalid JSON'); }
  };
  document.getElementById('tfCopy').onclick = ()=> navigator.clipboard.writeText(ta.value).then(()=>toast('Copied'));
  document.getElementById('tfClear').onclick = ()=> ta.value='';
}

/* ---------- Small helpers ---------- */
function toast(msg){
  const el = document.createElement('div');
  el.textContent = msg;
  el.style.position='fixed'; el.style.bottom='28px'; el.style.left='50%'; el.style.transform='translateX(-50%)'; el.style.background='rgba(0,0,0,0.75)';
  el.style.color='white'; el.style.padding='10px 16px'; el.style.borderRadius='10px'; el.style.zIndex=9999;
  document.body.appendChild(el);
  setTimeout(()=>{ el.style.transition='opacity .3s'; el.style.opacity='0'; setTimeout(()=>el.remove(),300); },1400);
}

/* ---------- Start default tool ---------- */
openTool('notes');

/* ---------- Accessibility / fit fixes ---------- */
/* prevent tool buttons overflowing off-screen: adjust min-width on small devices */
(function adjustButtons(){
  const style = document.createElement('style');
  style.innerHTML = `@media (max-width:420px){ .tool-btn{min-width:82px;padding:8px 12px;font-size:14px;} }`;
  document.head.appendChild(style);
})();

</script>
</body>
</html>
